<server description="Game On! Room Service">

    <!-- Enable features -->
    <featureManager>
		<feature>websocket-1.1</feature>
	    <feature>localConnector-1.0</feature>
        <feature>jaxrs-2.0</feature>
        <feature>cdi-1.2</feature>
        <feature>jsonp-1.0</feature>
        <feature>ssl-1.0</feature>
        <feature>concurrent-1.0</feature>
    </featureManager>

    <!-- To access this server from a remote client add a host attribute to the following element, e.g. host="*"  -->
    <httpEndpoint host="*" httpPort="9080" httpsPort="9443" id="defaultHttpEndpoint"/>

    <keyStore id="defaultKeyStore" password="testOnlyKeystore"/>
    <keyStore id="defaultTrustStore" location="truststore.jks" password="truststore"/>

	<sslDefault sslRef="DefaultSSLSettings" />
	<ssl id="DefaultSSLSettings" keyStoreRef="defaultKeyStore" trustStoreRef="defaultTrustStore" />

    <!-- Our key that allows us to register rooms -->
    <jndiEntry jndiName="registrationSecret" value="${env.MAP_KEY}"/>

	<jndiEntry jndiName="systemId" value="${env.SYSTEM_ID}"/>
	
	<!-- This is set in the startup.sh script -->
	<jndiEntry jndiName="originIp" value="${env.DOCKER_IP}"/>

	<logging consoleLogLevel="INFO" traceSpecification="*=info:net.wasdev.gameon.*=all"/>

	<!-- This is required to prevent the web apps from being lazily loaded -->
	<webContainer deferServletLoad="false"/>

	<!-- Executor used by RoomRegistration because it can't use CDI -->
    <managedScheduledExecutorService jndiName="concurrent/execSvc"/>

    <applicationMonitor dropinsEnabled="false"/>

    <webApplication id="room-app" location="room-app.war" name="room-app"/>
</server>
