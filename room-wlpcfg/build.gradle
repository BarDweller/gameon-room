apply plugin: 'eclipse'

buildscript {
	repositories {
	    mavenCentral()
	}
	
	dependencies {
		classpath 'com.bmuschko:gradle-docker-plugin:2.6'
	}
}


task copyTask(type: Copy) {
    from '../room-app/build/libs/room-app-1.0.war'
    into 'servers/gameon-room/apps/'
    rename("room-app-1.0.war", "room-app.war")
}

apply plugin: 'com.bmuschko.docker-remote-api'

import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage

docker_host = System.getenv('DOCKER_HOST')

docker {
    url = docker_host
}

task buildImage(type: DockerBuildImage, dependsOn: 'copyTask') {
	inputDir = file('.')
    tag = 'gameon-room'
}